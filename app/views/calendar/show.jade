extends ../layouts/default

block header
  link(rel='stylesheet', href='/css/fullcalendar.css')
  link(rel='stylesheet', href='/css/fullcalendar.print.css', media='print')

block content
  h2
    #{lingua.calendar}

  div#calendar

block pageScript
  script(type='text/javascript', src='/js/jquery-ui-1.8.23.custom.min.js')
  script(type='text/javascript', src='/js/fullcalendar.js')
  script(type='text/javascript')
    $(document).ready(function() {
      var date = new Date();
      var d = date.getDate();
      var m = date.getMonth();
      var y = date.getFullYear();
      
      $('#calendar').fullCalendar({
        header: {
          left: 'prev,next today',
          center: 'title',
          right: 'month,agendaWeek,agendaDay'
        },
        editable: true,
        //events: '/users/'+!{JSON.stringify(req.user.id)}+'/events'
        eventSources: [

        // your event source
        {
            url: '/users/'+!{JSON.stringify(req.user.id)}+'/events', // use the `url` property
            color: 'rgb(51,102,204)',    // an option!
            textColor: 'white'  // an option!
        }

        // any other sources...

        ]
        /*[
          {
            title: 'All Day Event',
            start: new Date(y, m, 1)
          },
          {
            title: 'Long Event',
            start: new Date(y, m, d-5),
            end: new Date(y, m, d-2)
          },
          {
            id: 999,
            title: 'Repeating Event',
            start: new Date(y, m, d-3, 16, 0),
            allDay: false
          },
          {
            id: 999,
            title: 'Repeating Event',
            start: new Date(y, m, d+4, 16, 0),
            allDay: false
          },
          {
            title: 'Meeting',
            start: new Date(y, m, d, 10, 30),
            allDay: false
          },
          {
            title: 'Lunch',
            start: new Date(y, m, d, 12, 0),
            end: new Date(y, m, d, 14, 0),
            allDay: false
          },
          {
            title: 'Birthday Party',
            start: new Date(y, m, d+1, 19, 0),
            end: new Date(y, m, d+1, 22, 30),
            allDay: false
          },
          {
            title: 'Click for Google',
            start: new Date(y, m, 28),
            end: new Date(y, m, 29),
            url: 'http://google.com/'
          }
        ]*/
      });  
      //TODO ajax call for rendering events
      
    });